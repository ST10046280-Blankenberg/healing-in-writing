@model HealingInWriting.Models.Books.BookListWithFilterViewModel

@{
    ViewData["Title"] = "Books for the Community";
}

@section Scripts {
    <script src="~/js/views/books-index.js"></script>
}

@section Styles {
    <link rel="stylesheet" href="~/css/shared/page-hero.css" />
    <link rel="stylesheet" href="~/css/shared/search-bar.css" />
    <link rel="stylesheet" href="~/css/views/books.css" asp-append-version="true" />
}

@{
    var totalCount = ViewBag.TotalCount ?? 0;
    var pageSize = ViewBag.PageSize ?? 10;
    var currentPage = ViewBag.CurrentPage ?? 1;
    var totalPages = (int)Math.Ceiling((double)totalCount / pageSize);
}

<main class="books">
    <!-- Hero Section with Title and Search -->
    <section class="page-hero">
        <div class="page-hero__content">
            <h1 class="page-hero__title">Books for the Community</h1>
            <p class="page-hero__subtitle">Browse and share books available in the community. Find what you need or give
                a book a new home.</p>
        </div>

        <!-- Reusable Search and Filter Bar -->
        <div class="fade-in-up delay-100">
            <partial name="_SearchAndFilterBar" model="Model.Filter" />
        </div>
    </section>

    <!-- Books List Section -->
    <section class="books__list-section">
        <div class="books__list-container" id="books-list-container">
            @Html.Partial("_BookCardsPartial", Model.BookList.Books)
        </div>
    </section>

    <div id="books-pagination" data-total-count="@totalCount" data-page-size="@pageSize"
        data-current-page="@currentPage">
        <button class="btn btn--primary" data-page="prev">Prev</button>
        <span id="pagination-current">@currentPage</span> / <span id="pagination-total">@totalPages</span>
        <button class="btn btn--primary" data-page="next">Next</button>
    </div>
</main>