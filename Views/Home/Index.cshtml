@model HealingInWriting.Models.Home.HomeIndexViewModel

@{
    ViewData["Title"] = "Home";
}
@section Styles {
    <link rel="stylesheet" href="~/css/views/home.css" asp-append-version="true" />
}

<section class="home-hero">
    <div class="home-hero__container">
        <!-- Left Column - Content -->
        <div class="home-hero__content">
            <h1 class="home-hero__title">
                Healing Together, Growing Stronger
            </h1>
            <p class="home-hero__description">
                Join a supportive community where trauma survivors share their stories, find hope, 
                and build resilience together. You're not alone in your journey.
            </p>
            <div class="home-hero__actions">
                <a class="home-hero__btn" asp-area="" asp-controller="Auth" asp-action="Auth" asp-route-mode="register">
                    Join Our Community
                </a>
                <a class="home-hero__btn home-hero__btn--secondary" asp-area="" asp-controller="Home" asp-action="About">
                    Learn More
                </a>
            </div>
        </div>
        
        <!-- Right Column - Image -->
        <div class="home-hero__image-wrapper">
            <div class="home-hero__image-card">
                <img class="home-hero__image" 
                     src="~/images/hero-home.webp" 
                     alt="Diverse group of supportive community members smiling together" />
            </div>
            <!-- Decorative Elements -->
            <div class="home-hero__decoration home-hero__decoration--top" aria-hidden="true"></div>
            <div class="home-hero__decoration home-hero__decoration--bottom" aria-hidden="true"></div>
        </div>
    </div>
</section>

<section class="home-stories">
    <div class="home-stories__container">
        <!-- Header -->
        <header class="home-stories__header">
            <h2 class="home-stories__title">Stories of Hope</h2>
            <p class="home-stories__subtitle">
                Real stories from our community members sharing their journeys of healing and growth
            </p>
        </header>
        
        <!-- Stories Grid -->
        <div class="home-stories__grid">
            @if (Model.Stories.Any())
            {
                foreach (var story in Model.Stories)
                {
                    <article class="home-stories__card">
                        <h3 class="home-stories__card-title">@story.Title</h3>
                        <p class="home-stories__card-excerpt">
                            @story.Snippet
                        </p>
                        <div class="home-stories__card-footer">
                            <div class="home-stories__author">
                                <span class="home-stories__author-name">@story.AuthorName</span>
                            </div>
                            <a class="home-stories__read-more" asp-area="" asp-controller="Stories" asp-action="Details" asp-route-id="@story.StoryId">
                                Read More
                            </a>
                        </div>
                    </article>
                }
            }
            else
            {
                <article class="home-stories__card">
                    <h3 class="home-stories__card-title">No stories yet</h3>
                    <p class="home-stories__card-excerpt">
                        Stories shared by the community will appear here once submissions are published.
                    </p>
                    <div class="home-stories__card-footer">
                        <div class="home-stories__author">
                            <span class="home-stories__author-name">Healing in Writing</span>
                        </div>
                        <a class="home-stories__read-more" asp-area="" asp-controller="Stories" asp-action="Submit">
                            Share Your Story
                        </a>
                    </div>
                </article>
            }
        </div>
        
        <!-- View All CTA -->
        <div class="home-stories__cta">
            <a class="home-stories__btn" asp-area="" asp-controller="Stories" asp-action="Index">
                View All Stories
            </a>
        </div>
    </div>
</section>

<section class="home-events">
    <div class="home-events__container">
        <!-- Header -->
        <header class="home-events__header">
            <h2 class="home-events__title">Upcoming Events</h2>
            <p class="home-events__subtitle">
                Join us for supportive gatherings, workshops, and community activities
            </p>
        </header>
        
        <!-- Featured Event Card -->
        @if (Model.FeaturedEvent != null)
        {
            var featuredDate = Model.FeaturedEvent.StartDateTime.ToString("dddd, MMMM dd, yyyy");
            var featuredTime = $"{Model.FeaturedEvent.StartDateTime:h:mm tt} - {Model.FeaturedEvent.EndDateTime:h:mm tt}";
            var featuredDescription = Model.FeaturedEvent.Description.Length > 150
                ? Model.FeaturedEvent.Description.Substring(0, 150) + "..."
                : Model.FeaturedEvent.Description;

            <article class="home-events__featured">
                <div class="home-events__featured-content">
                    <span class="home-events__badge">Featured Event</span>

                    <h3 class="home-events__featured-title">@Model.FeaturedEvent.Title</h3>

                    <p class="home-events__featured-description">
                        @featuredDescription
                    </p>

                    <div class="home-events__featured-info">
                        <div class="home-events__info-item">
                            <svg class="home-events__icon" fill="currentColor" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
                                <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                            </svg>
                            <span>@featuredDate</span>
                        </div>

                        <div class="home-events__info-item">
                            <svg class="home-events__icon" fill="currentColor" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                            </svg>
                            <span>@featuredTime</span>
                        </div>

                        <div class="home-events__info-item">
                            <svg class="home-events__icon" fill="currentColor" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                            </svg>
                            <span>@Model.FeaturedEvent.LocationSummary</span>
                        </div>
                    </div>

                    <a class="home-events__btn" asp-area="" asp-controller="Events" asp-action="Details" asp-route-id="@Model.FeaturedEvent.Id">
                        Join Event
                    </a>
                </div>

                <div class="home-events__featured-image">
                    <img src="@Model.FeaturedEvent.CoverImageUrl"
                         alt="@Model.FeaturedEvent.Title"
                         class="home-events__image" />
                </div>
            </article>
        }
        else
        {
            <div style="text-align: center; padding: 3rem;">
                <h3>No upcoming events available</h3>
                <p>Check back soon for exciting community events and workshops.</p>
            </div>
        }
        
        <!-- Event Cards Grid -->
        @if (Model.UpcomingEvents.Any())
        {
            <div class="home-events__grid">
                @foreach (var eventItem in Model.UpcomingEvents)
                {
                    var eventDate = eventItem.StartDateTime.ToString("MMMM dd, yyyy");
                    var eventTime = $"{eventItem.StartDateTime:h:mm tt} - {eventItem.EndDateTime:h:mm tt}";

                    <article class="home-events__card">
                        <h4 class="home-events__card-title">@eventItem.Title</h4>

                        <div class="home-events__card-info">
                            <div class="home-events__info-item home-events__info-item--small">
                                <svg class="home-events__icon home-events__icon--small" fill="currentColor" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
                                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                                </svg>
                                <span>@eventDate</span>
                            </div>

                            <div class="home-events__info-item home-events__info-item--small">
                                <svg class="home-events__icon home-events__icon--small" fill="currentColor" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                </svg>
                                <span>@eventTime</span>
                            </div>

                            @if (!string.IsNullOrWhiteSpace(eventItem.LocationSummary))
                            {
                                <div class="home-events__info-item home-events__info-item--small">
                                    <svg class="home-events__icon home-events__icon--small" fill="currentColor" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                                    </svg>
                                    <span>@eventItem.LocationSummary</span>
                                </div>
                            }
                        </div>

                        <a class="home-events__card-btn" asp-area="" asp-controller="Events" asp-action="Details" asp-route-id="@eventItem.Id">
                            Learn More
                        </a>
                    </article>
                }
            </div>
        }
    </div>
</section>
